{% extends 'base.html.twig' %}

{% block title %}Gestion des Annonces - Espace Administrateur
{% endblock %}

{% block body %}

	<!-- NAVBAR -->
	<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm py-2 fixed-top">
		<div class="container d-flex justify-content-between align-items-center">

			<div class="d-flex align-items-center gap-3">
				<a href="{{ path('app_admin') }}">
					<img src="{{ asset('images/LOGO.PNG') }}" alt="Logo Yad Alev" class="nav-logo">
				</a>
				<span class="fw-bold text-primary fs-5">Espace Administrateur</span>
			</div>

			<div class="d-flex align-items-center gap-4">
				<a href="{{ path('app_admin') }}" class="nav-icon" title="Retour">
					<i class="fas fa-arrow-left"></i>
				</a>
				<a href="{{ path('app_logout') }}" class="nav-icon" title="Se déconnecter">
					<i class="fas fa-sign-out-alt"></i>
				</a>
			</div>

		</div>
	</nav>

	<!-- CONTENU -->
	<div class="main-container">

		<div class="content-wrapper d-flex flex-column justify-content-start align-items-center pt-5">

			<div class="container mt-5">
				<div class="d-flex justify-content-between align-items-center mb-4">
					<h1 class="text-primary fw-bold">Annonces pour l'Espace Famille</h1>
					<a href="{{ path('app_admin_announcement_new') }}" class="btn btn-primary">
						<i class="fas fa-plus"></i>
						Nouvelle Annonce
					</a>
				</div>

				<div class="card shadow-sm border-0">
					<div class="card-body">
						<table class="table table-hover align-middle">
							<thead class="table-light">
								<tr>
									<th>Message</th>
									<th>Statut</th>
									<th>Date</th>
									<th class="text-end">Actions</th>
								</tr>
							</thead>
							<tbody>
								{% for announcement in announcements %}
									<tr>
										<td>{{ announcement.message|slice(0, 80) }}...</td>
										<td>
											{% if announcement.isActive %}
												<span class="badge bg-success rounded-pill">Active</span>
											{% else %}
												<span class="badge bg-secondary rounded-pill">Inactive</span>
											{% endif %}
										</td>
										<td>{{ announcement.createdAt ? announcement.createdAt|date('d/m/Y H:i') : '' }}</td>
										<td class="text-end">
											<a href="{{ path('app_admin_announcement_edit', {'id': announcement.id}) }}" class="btn btn-sm btn-outline-primary">Modifier</a>
										</td>
									</tr>
								{% else %}
									<tr>
										<td colspan="4" class="text-center py-4 text-muted">Aucune annonce trouvée.</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>

				<div class="mt-4">
					<a href="{{ path('app_admin_settings_index') }}" class="text-decoration-none text-muted">
						<i class="fas fa-arrow-left me-1"></i>
						Retour aux paramètres
					</a>
				</div>
			</div>

		</div>

		<!-- FOOTER -->
		<footer class="footer-custom text-center text-muted small py-4 mt-auto">
			<div class="footer-line mx-auto"></div>

			<div class="footer-content mt-3">
				<img src="{{ asset('images/LOGO.PNG') }}" alt="Yad Alev" class="footer-logo mb-1">
				<p class="m-0">© 2025 Espace Administrateur Yad Alev — Tous droits réservés.</p>
			</div>
		</footer>

	</div>

	<style>
		/* Reprise des styles admin */
		.navbar {
			border-bottom: 1px solid #e2e8f0;
		}
		.nav-logo {
			width: 48px;
			height: 48px;
			object-fit: contain;
		}
		.nav-icon {
			font-size: 1.4rem;
			color: #444;
			transition: 0.2s;
		}
		.nav-icon:hover {
			color: #0d6efd;
			transform: translateY(-2px);
		}
		.main-container {
			min-height: 100vh;
			display: flex;
			flex-direction: column;
		}
		.content-wrapper {
			padding-top: 80px;
			width: 100%;
			flex: 1;
		}
		.footer-line {
			width: 85%;
			height: 1px;
			background: #d0d7e0;
		}
		.footer-logo {
			width: 60px;
		}
	</style>

{% endblock %}
