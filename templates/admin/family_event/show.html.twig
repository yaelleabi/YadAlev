{% extends 'base.html.twig' %}

{% block title %}Détails Projet Famille
{% endblock %}

{% block body %}

	<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm py-2 fixed-top">
		<div class="container d-flex justify-content-between align-items-center">
			<div class="d-flex align-items-center gap-3">
				<a href="{{ path('app_admin') }}">
					<img src="{{ asset('images/LOGO.PNG') }}" alt="Logo Yad Alev" class="nav-logo">
				</a>
				<span class="fw-bold text-primary fs-5">Détails Projet</span>
			</div>

			<div class="d-flex align-items-center gap-4">
				<a href="{{ path('admin_family_event_index') }}" class="nav-icon" title="Retour liste">
					<i class="fas fa-arrow-left"></i>
				</a>
				<a href="{{ path('app_logout') }}" class="nav-icon" title="Se déconnecter">
					<i class="fas fa-sign-out-alt"></i>
				</a>
			</div>
		</div>
	</nav>

	<div class="main-container">
		<div class="content-wrapper container" style="padding-top: 100px;">

			<div class="text-center mb-5 fade-in">
				<h2 class="text-primary fw-bold">{{ family_event.Title }}</h2>
				<p class="text-muted" style="animation-delay:.2s">
					Détails du projet sélectionné.
				</p>
			</div>

			<div class="info-card shadow-sm fade-in p-5" style="max-width: 800px; margin: 0 auto;">

				<div class="row mb-4">
					<div class="col-md-3 text-muted">Description</div>
					<div class="col-md-9 fw-bold">{{ family_event.Description|nl2br }}</div>
				</div>

				<hr class="text-muted opacity-25">

				<div class="row mb-4">
					<div class="col-md-3 text-muted">Dates</div>
					<div class="col-md-9">
						<div>Du :
							<strong>{{ family_event.startDate ? family_event.startDate|date('d/m/Y H:i') : '-' }}</strong>
						</div>
						<div>Au :
							<strong>{{ family_event.endDate ? family_event.endDate|date('d/m/Y H:i') : '-' }}</strong>
						</div>
					</div>
				</div>

				<div class="row mb-4">
					<div class="col-md-3 text-muted">Statut</div>
					<div class="col-md-9">
						{% if family_event.isVisible %}
							<span class="badge bg-success">Visible</span>
						{% else %}
							<span class="badge bg-secondary">Masqué</span>
						{% endif %}
					</div>
				</div>

				<div class="row mb-4">
					<div class="col-md-3 text-muted">Quantité</div>
					<div class="col-md-9 fw-bold text-primary fs-5">{{ family_event.Quantity }}</div>
				</div>

				<hr class="text-muted opacity-25">


				<div class="mb-4">
					<h5 class="text-primary fw-bold mb-3">Familles Assignées</h5>
					{% if family_event.assignedFamilies is not empty %}
						<div class="d-flex flex-wrap gap-2">
							{% for family in family_event.assignedFamilies %}
								<span class="badge bg-light text-dark border p-2">
									<i class="fas fa-users me-1 text-muted"></i>
									{{ family.name }}
									{{ family.firstName }}
								</span>
							{% endfor %}
						</div>
					{% else %}
						<p class="text-muted small">Aucune famille assignée pour le moment.</p>
					{% endif %}
				</div>

				<div class="d-flex justify-content-between align-items-center mt-5">
					<a href="{{ path('admin_family_event_index') }}" class="btn btn-outline-secondary">
						← Retour
					</a>
					<div class="d-flex gap-2">
						<form method="post" action="{{ path('admin_family_event_delete', {'id': family_event.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce projet ?');">
							<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ family_event.id) }}">
							<button class="btn btn-outline-danger">
								<i class="fas fa-trash"></i>
							</button>
						</form>
						<a href="{{ path('admin_family_event_edit', {'id': family_event.id}) }}" class="btn btn-primary shadow-sm px-4">
							<i class="fas fa-edit me-1"></i>
							Modifier
						</a>
					</div>
				</div>

			</div>

		</div>

		<footer class="footer-custom text-center text-muted small py-4 mt-5">
			<div class="footer-line mx-auto"></div>
			<p class="m-0">© 2025 Yad Alev — Tous droits réservés.</p>
		</footer>
	</div>

	<style>
		.navbar {
			border-bottom: 1px solid #e2e8f0;
		}
		.nav-logo {
			width: 48px;
		}

		.nav-icon {
			font-size: 1.4rem;
			color: #444;
			transition: 0.2s;
		}
		.nav-icon:hover {
			color: #0d6efd;
			transform: translateY(-2px);
		}

		.main-container {
			min-height: 100vh;
			display: flex;
			flex-direction: column;
		}

		.info-card {
			background: #fff;
			border-radius: 1rem;
			border: 1px solid #e2e8f0;
		}

		.fade-in {
			opacity: 0;
			animation: fadeSlide 0.7s ease forwards;
		}

		@keyframes fadeSlide {
			from {
				opacity: 0;
				transform: translateY(25px);
			}
			to {
				opacity: 1;
				transform: none;
			}
		}

		.footer-line {
			width: 85%;
			height: 1px;
			background: #d0d7e0;
		}
	</style>

{% endblock %}
