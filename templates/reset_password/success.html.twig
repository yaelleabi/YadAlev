{% extends 'base.html.twig' %}

{% block title %}Mot de passe modifié{% endblock %}

{% block body %}
<div class="d-flex flex-column justify-content-center align-items-center min-vh-100 bg-light">
    <div class="card shadow-sm p-5 text-center" style="max-width: 600px; border-radius: 1rem;">
        <img src="{{ asset('images/LOGO.PNG') }}" alt="Logo Yad Alev" class="mb-4" style="width:120px;">

        <i class="bi bi-check-circle-fill text-success mb-3" style="font-size: 4rem;"></i>

        <h2 class="fw-bold text-success mb-3">Mot de passe mis à jour</h2>

        <p class="text-muted fs-5 mb-0">
            Votre mot de passe a bien été modifié.<br>
            Vous pouvez maintenant vous connecter avec votre nouveau mot de passe.
        </p>

        <p class="text-secondary mt-4">
            <i class="bi bi-arrow-clockwise me-1"></i>
            Redirection automatique dans <span id="countdown" class="fw-semibold text-primary">5</span> secondes...
        </p>

        <a href="{{ path('app_home') }}" class="btn btn-success mt-3 px-4 rounded-pill">
            <i class="bi bi-house-door me-1"></i> Retour à l’accueil
        </a>
    </div>
</div>

<style>
body {
  background: linear-gradient(135deg, #f8f9fc, #eef2f7);
  overflow-x: hidden;
}
.card {
  border: 1px solid #e2e8f0;
  border-radius: 1rem;
  box-shadow: 0 10px 35px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card:hover {
  transform: translateY(-3px);
  box-shadow: 0 16px 50px rgba(0, 0, 0, 0.15);
}
</style>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script>
        function initCountdown() {
            const countdownEl = document.getElementById('countdown');
            if (!countdownEl) return;

            let countdown = parseInt(countdownEl.textContent || '5', 10);
            const redirectUrl = "{{ path('app_home') }}";

            const timer = setInterval(() => {
                countdown--;
                countdownEl.textContent = countdown;
                if (countdown <= 0) {
                    clearInterval(timer);
                    window.location.href = redirectUrl;
                }
            }, 1000);
        }

        document.addEventListener("DOMContentLoaded", initCountdown);
        document.addEventListener("turbo:load", initCountdown);
    </script>
{% endblock %}
